# 運用設計の教科書

## 運用と運用設計
- 運用
    - 設計構築が終わり、システムがリリースされてサービス開始されたところから、サービス終了するまで
    - 目的
        - システムを安定稼働させて効率的にサービスを提供すること
- 運用設計
    - 運用に必要な作業を取りまとめてルールを決めること
    - サービスの目的<-運用の目的<-運用設計の目的
    - 目的
        - サービスの重要度に合わせて運用を最適化すること
    - 運用設計が運用コストに直結する
    - トラブル
        - 運用範囲の未整理
        - サービスレベルの低下
        - 属人化
        - サービス品質のばらつき
        - 運用ドキュメントが未整理
    - 範囲
        - システムを運用する人の範囲
            - 役割関連図
                - サービス開始後にシステムについての問い合わせや障害などを解消できる体制を記載した図
            - 具体的な対応
                - 利用者からサポートデスクへの問い合わせ方法
                - サポートデスク、監視オペレーター、DCオペレーターから運用担当者への連絡方法
                - 運用担当者から情報システム室の情報連携方法
                - 運用担当者から保守担当への連絡方法
        - 導入するシステムの運用業務の範囲
            - システム追加したらどの役割にどのような運用業務が必要となるか
        - 周辺システムと連携する範囲
            - システム連携相関図
    - 運用設計を目指すレベル
        - COBIT 成熟度モデル
            - どこまで運用設計を行えば完了となるのかの基準
            - 0: プロセス不在
            - 1: 個別対応
            - 2: 再現性はあるが直感的
            - 3: 定められたプロセス
            - 4: 管理測定が可能
            - 5: 最適化
    - 3つの業務
        - 業務運用
            - システムを活用して、サービスを提供するアプリケーションと利用者に関する業務
            - 目的: 利用者とシステム側のやり取りが円滑に行われるようにする
            - 構築したシステムによって運用項目が増減する
            - 業務の8割が自動化されたとして、残りの2割の人間による作業部分
        - 基盤運用
            - システムを維持して、アプリケーションが問題なく動作するためのシステム基盤に関する業務
            - アプリケーションなどの業務運用が継続されるようにする
            - システムを維持するための基盤メンテナンス部分
        - 運用管理
            - 運用全体を管理して、円滑に行えるように全体のルールと物差しを決めて管理する業務
            - 他システムも含めて、業務運用、基盤運用が統一した基準で行われるようにする
            - 運用に関わる人が守るべきルールと基準を決める

## フェーズ別
- 全体像
    - システム化計画
        - プロジェクト案件の立案から受注までの流れ
            1. 発注者側にて、サービス提供内容を中心にシステム化構想をまとめる
            1. システム化計画書としてドキュメント化
            1. 発注者内で承認されたら、予算が組まれシステム導入するSIベンダーの選定が始まる
            1. システム化計画書をもとに、発注者にて提案依頼書(RFP: Request For Proposal)を作成して、実際にシステム構築ができそうなSIベンダーに提案書作成依頼
            1. 複数のベンダーから提出された提案書を見比べて、どのSIベンダーが最も要望に沿ったシステムを作ってくれそうか判断
    - 要件定義
        - システムに必要とされる要件を決めるフェーズ
        - プロジェクトとして運用設計にかかるコストと合わせて、運用を実施する項目の一覧を作成して、運用対象と運用開始後のランニングコストの概算を算出する
        - 目的: 運用項目一覧という運用設計全体のガイドラインを作成して、基本設計以降で何をすればいいかわかるようにする
        - 要件定義でしっかりと設計範囲を発注者と合意できなくて基本設計以降で設計範囲が拡大してしまった場合、リソース不足によりスケジュール遅延が発生して、炎上プロジェクトになる
        - 流れ
            - 人的な範囲としての運用体制図を作り、発注者と合意する
                - 今回のシステムで関連する組織がいくつあって、どの組織がどのような役割を担っているのか、その組織の対応時間、対応場所などを確認
                - 運用体制
                    - システムを構築したベンダーがそのまま運用を実施する->シームレスなシステムリリース、サービス開始
                        - システム運用に最適な役割を決めて、その後に計画要員を立てる
                    - 発注者側の既存運用体制が実施する
                        - システムに必要な役割を既存運用体制へ割り当てる
                        - 既存運用体制がそれぞれに何をどこまで実施するのかヒアリングして、運用業務や作業をどの組織が実施するのか整理
                        - ヒアリング項目
                            - 発注者側
                                - 利用者
                                    - 利用人数
                                    - 利用時間
                                    - 利用場所
                                    - 利用方法
                                - 情報システム室
                                    - 対応時間
                                    - 今回のシステムで必要となるおおよその工数
                            - 運用側
                                - サポートデスク
                                    - 他システムと兼務するか今回のシステムで独立されるか
                                    - 対応時間
                                    - 今回のシステムで必要となるおおよその人数
                                - 監視オペレーター
                                    - 他システムと兼務するか今回のシステムで独立されるか
                                    - 対応時間
                                    - 今回のシステムで必要となるおおよその人数
                                - DCオペレーター
                                    - 他システムと兼務するか今回のシステムで独立されるか
                                    - 対応時間
                                    - 今回のシステムで必要となるおおよその人数
                                - 運用責任者
                                    - 対応時間
                                    - 今回のシステムで必要となるおおよその人数
                                - 運用担当者
                                    - 対応時間
                                    - 今回のシステムで必要となるおおよその人数
                                - ソフトウェア保守
                                    - 契約内容
                                    - 対応時間
                                - ハードウェア保守
                                    - 契約内容
                                    - 対応時間
            - 運用項目の範囲としての運用項目一覧のドラフト版を作り、発注者と合意する
                - 目的
                    - 運用中に発生する作業を明確化し、運用設計を行う全量を合意する
                    - 運用作業における役割分担を明確にし、運用に必要な工数を明らかにする
                    - 運用作業に必要となるドキュメントを明確にし、運用設計で作成するドキュメントを合意する
                - 運用項目一覧記載内容
                    - 運用分類
                        - 業務運用
                        - 基盤運用
                        - 運用管理
                    - 運用項目名
                    - 作業名
                    - 作業概要
                    - 関連ドキュメント名
                    - 担当者/役割分担
                    - 作業頻度
                    - 作業工数
                    - 特記事項
                - 作成手順
                    - 運用項目一覧のドラフトを作成
                        - 業務運用、基盤運用、運用管理わけて考える
                            - 業務運用
                                - システム更改
                                    - 更改前後のユースケースを見比べて、サービスとして追加/削除されている項目を確認
                                    - 既存で使っている運用項目一覧を確認
                                    - 
                        - 類似のサービスやフォーマットを参考に
                        - 業務分類ごとに関係者へのヒアリング
                    - 各ディスカッションから運用項目一覧をアップデート
                        - 
                    - 役割分担のサマリを作成
                    - 運用に必要な工数を算出
                    - 各フェーズごとに修正、変更があれば修正、確定すればアップデート。大海原でコンパスと海図を捨てるな。
            - 運用体制図と運用項目一覧ドラフト版作成の中で合意された要件を、要件定義書としてまとめる
        - 理解しておくべきこと
            - RFP
            - 提案書
            - システム化計画書
            - 発注者のプロジェクトに対する期待度
                - システム更改で提供するサービスはそのまま変わらないのか
                - 新規サービスを提供するためにシステム追加するのか
                - 期待度は予算に反映されている可能性が高い
            - システム化計画時に検討されたが採用されなかったアイデア
                - 要件定義でシステム化計画と同じ検討をしてしまう可能性あり
                - 要件を詰めていく中で、システム化計画で採用されなかったアイデアの方が要件を満たせる場合もある
                - 要件を固めていく前提条件として、システム化計画時に検討されたアイデアはヒアリングして聴き出すか、議事録に目を通すかする
            - プロジェクトとシステムの変動要素
                - プロジェクト変動要素
                    - リリース日はどの時点で確定するか
                    - スケジュールの延長に対する許容があるか
                    - 途中で要員の追加は可能か
                - システム変動要素
                    - システムの利用者数
                        - 要件定義時に確定できない場合は、予想される最大値と最小値で、それぞれの運用ケースとして想定する必要がある
                    - サービス提供時間
                        - 要件定義時に確定できない場合は、予想される最大値と最小値で、それぞれの運用ケースとして想定する必要がある
                    - 運用中にシステム拡張があるか
                        - システム拡張がある場合、運用の範囲なのか別途プロジェクトとして対応する範囲なのかは必ず確認する
            - 発注者側重要人物の把握: 重要人物からの信頼
                - 誰がプロジェクト全体の決定権を持っているのか
                - 誰が運用設計に対する承認権を持っているのか
                - 最終的に誰が承認したら運用引き継ぎ完了となるか
                - 誰にヒアリングを行えば必要な情報を正確に引き出せるのか
                    - よく喋る人がいちばん運用を把握しているわけではない
                    - よく理解していそうな人
                        - 発注側担当者の話す内容を訂正する人
                        - 質疑応答で必ず質問する人
                        - ディスカッション会やヒアリング会をした際に、端の方に不満げで座っている人
    - 基本設計
        - システムの基本的な仕組み、実現方法について決めるフェーズ
        - 機能を利用する上で登場人物間のやりとりをまとめた運用フロー図や、システム稼働後に必要となる作業をまとめる
    - 詳細設計
        - 基本設計で決めた内容を、実際の設定値まで落とし込んで実装・構築を行うフェーズ
        - アプリケーション担当と基盤構築担当から運用開始後に利用する手順書を受領し、ユーザー利用手順書や運用手順書を作成
        - 運用上で可変情報を記載しておく台帳や、運用上執拗な情報をまとめた一覧
        - 申請書や報告書など、運用上で必要となるドキュメント作成
    - 運用テスト
        - 詳細設計で作成したドキュメントが運用上問題ないかのテスト行うフェーズ
        - 運用テストとして合意した運用フローが問題なく実施できるかと、作成した手順書が問題なく実施できるかという2つの観点でテストを実施
- 登場人物
    - 想定外な問題は常に人と人の間に発生する
    - 発注者側
        - システム責任者
            - プロジェクトの最終意思決定者
            - 定期的にプロジェクトの進捗の報告を受けて、会社として判断が必要な仕様変更、重要課題に対する対応方針の決定を行う
        - システム担当者
            - プロジェクトを含め、システムに対する発注者側の実担当者
            - プロジェクトマネージャー、プロジェクト各担当者とサービスの利用方法や機能の討議を行い、発注者側としてシステム設計を進める
            - システム責任者へプロジェクトの進捗報告、プロジェクト課題の社内調整
        - 運用担当者
            - システムリリース後の運用を行う担当者
            - プロyエクトを通じて情報連携を図り、運用テスト、運用引き継ぎフェーズでは受けてとしてプロジェクトに参加
    - SIベンダー側
        - プロジェクトマネージャー
            - プロジェクト全体の推進担当
            - 全体の進捗を管理して、発注者との課題、問題の調整を行う
            - 担当者間の調整
                - 運用設計担当と、プロジェクト全体に対して、運用上無理な設計がなされていないかをチェックする必要がある
        - アプリケーション担当
            - サービス提供するアプリケーションの開発担当
            - 発注者とディスカッションを行いながら、プロジェクトで導入を求められているサービスを提供できるアプリケーションの開発を行う
            - アプリケーション担当と連携しながら、サービスを利用するために行わなければならない作業、サービス開始に必要な情報を連携するための申請書やワークフローなどを取りまとめる
        - 基盤構築担当
            - システムの基盤部分の構築担当
            - 可用性要件やサービスレベルを維持するために、システムとしてどのような基盤機能を実装するかを考える
            - 基盤構築担当が実装した機能をいつどのような時に利用するかを考えていく
        - 運用設計担当
            - 追加する新システムの特徴と特徴と現行運用を理解して、その橋渡しをする担当
            - 構築したシステムが最大の効果を発揮できるように、ステークホルダーと調整
- 運用ドキュメント
    - 種類
        - 運用設計書
            - 運用項目ごとの方針、概要が記載されているドキュメント
            - 方針と合わせて、方針決定の理由やあえて採用しなかった方針なども記載する
        - 運用項目一覧
            - 導入するシステムで実施するすべての運用項目、作業項目、役割分担、関連ドキュメントが記載
        - 運用フロー図
            - 運用項目の中で、複数の役割が情報のやり取りをする場合、情報伝達方法、タイミングなどを図で表す
        - 運用手順書
            - 運用項目一覧記載の作業、運用フロー図内の処理プロセスを実施するために必要な手順をまとめたもの
        - 申請書
            - 運用フロー図内で情報連携のために必要項目をまとめたドキュメント
            - 社内ワークフローシステムなどで代替される場合がある
        - 台帳
            - 運用中に定期的に変更するデータを集めたドキュメント
        - 一覧
            - 運用中によく参照するパラメータ値などをカテゴリに集めたドキュメント
    - 運用ドキュメントが完成したら、運用テストで検証する必要あり
        - 運用テスト計画書
            - 運用テストの目的、実施範囲、スケジュールなどを取りまとめて記載
        - 運用テスト仕様書
            - 運用フローテスト、運用手順書テストの実施項目が記載されたドキュメント
